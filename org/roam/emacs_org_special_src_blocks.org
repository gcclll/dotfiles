:PROPERTIES:
:ID:       82acaa2e-9913-4c5b-83d9-57ac24698449
:ROAM_REFS: osb-links
:END:
#+SETUPFILE: ~/.gclrc/org/hugo_setup.org
#+HUGO_SLUG: emacs_org_special_src_blocks
#+HTML_HEAD: <meta name="category" content="emacs"/>
#+HTML_HEAD: <meta name="tags" content="org"/>
#+HTML_HEAD: <meta name="createdAt" content="2022-02-01 09:35:56"/>
#+TITLE: Emacs org-special-block-extras

<badge: GCCLL | Homepage | green | / | tinder>

Examples: [[https://alhassy.github.io/ElispCheatSheet/CheatSheet.pdf][PDF Viewer]] æˆ– [[https://alhassy.github.io/org-special-block-extras/][org-special-block-extras]]

refs: [[(start)]]

* Minimal working example
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: min-example
:END:

#+begin_parallel
[[color:orange][Are you excited to learn some Lisp?]] [[blue:Yes!]]

Pop-quiz: How does doc:apply work?
#+end_parallel

#+begin_details Answer
link-here:solution
Syntactically, ~(apply f '(x0 ... xN)) = (f x0 ... xN)~.

[[remark:Musa][Ain't that cool?]]

#+begin_spoiler aqua
That is, [[color:magenta][we can ((apply)) a function to a list of arguments!]]
#+end_spoiler

#+end_details

#+html: <br>
#+begin_box
octoicon:report Note that kbd:C-x_C-e evaluates a Lisp form!
#+end_box

#+LATEX_HEADER: \usepackage{multicol}
#+LATEX_HEADER: \usepackage{tcolorbox}
#+latex: In the LaTeX output, we have a glossary.

show:GLOSSARY

* å„ç§é“¾æ¥

[[kbd:xboldcolor]]  =*<pink: super neato stuff>*= -> *<pink: super neato stuff>*

[[kbd:xlinkhere]] æœ¬åœ°é”šç‚¹: link-here:test-link-here-links ç‚¹å‡»åæ³¨æ„ URL ~#~ åé¢
å†…å®¹çš„å˜åŒ–ã€‚

[[kbd:xicon]] octoicon:home ä¼šæ˜¾ç¤ºä¸€ä¸ªä¸»é¡µ Icon doc:o-link/octoicon ã€‚

[[kbd:xbadge]] ~<badge: Emacs | is awesome | blue |
https://www.google.com/search?q=hello%20world | gnu-emacs>~ å¯¼å‡ºæˆ <badge: Emacs | is awesome | blue | https://www.google.com/search?q=hello%20world | gnu-emacs>

[[kbd:xdoc]]  ~doc:thread-first~ åœ¨ [[id:aa445529-4f0e-48d8-833f-12c149603ca6][Documentations]] ä¸­å£°æ˜è¿‡çš„ï¼Œé¼ æ ‡æ”¾ä¸Šå»ä¼šæ˜¾ç¤ºå¯¹åº”çš„è¯´æ˜ã€‚

doc:thread-first Lisp å‡½æ•°å®šä¹‰

doc:family English å«ä¹‰

doc:Hussain ä¸ªäººæ–‡æ¡£æè¿°
* Blocks

** é“¾æ¥(link)
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section
:END:

*** red:margin
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-margin
:END:

=something[[margin:][documentation for something]] is important!!!=

=something[[margin:][documentation for something]] is important!!

ä¼šåœ¨ something å³ä¸Šè§’ç”Ÿæˆä¸€ä¸ªåœ†åœˆï¼Œç±»ä¼¼ doc çš„æ˜¾ç¤ºå…¶æ–‡æ¡£æè¿°ã€‚

#+begin_details Example:  "Links, without and with explict lables"
 This [[margin:][hola and *woah* ]] works!

 This [[margin:look!][hola]] works!

--------------------------------------------------------------------------------
*Source:*
#+begin_src org
 This [[margin:][hola and *woah* ]] works!

 This [[margin:look!][hola]] works!
#+end_src
#+end_details
#+html: <br>

#+begin_details Example:  "åœ¨è¯­å¥ä¸­é—´ï¼Œä½¿ç”¨ #+begin_margin, æ²¡æœ‰ label"

 Hello this
 #+begin_margin
 Extra details about whatever it is I'm talking about.
 #+end_margin
 is super neat!

--------------------------------------------------------------------------------
*Source:*

#+begin_src org :tangle no
 Hello this
 #+begin_margin
 Extra details about whatever it is I'm talking about.
 #+end_margin
 is super neat!
#+end_src
#+end_details
#+html: <br>

#+begin_details Example:  "åœ¨è¯­å¥ä¸­é—´ï¼Œä½¿ç”¨ #+begin_margin, æœ‰ label(this)"
 Hello
 #+begin_margin this
 Extra details about whatever it is I'm talking about.
 #+end_margin
 is super neat!

--------------------------------------------------------------------------------
*Source:*
#+begin_src org :tangle no
 Hello
 #+begin_margin this
 Extra details about whatever it is I'm talking about.
 #+end_margin
 is super neat!
#+end_src

#+end_details
#+html: <br>

@@html:<span id="marquee-in-margin"></span>@@
margin ä¸­è¿˜å¯ä»¥åŒ…å« html å…ƒç´ ï¼Œæ¯”å¦‚ï¼š ~<marquee>~ æ ‡ç­¾ï¼Œè®©æ–‡æ¡£æ›´åŠ ä¸°å¯Œ:
#+begin_details "â˜… Example: A â€˜marginâ€™ with an â€˜exportâ€™ in the middle" :title-color orange
 An HTML â€œmarqueeâ€
 #+begin_margin
 An example is best:
 #+begin_export html
 <marquee>Catch me if you can!</marquee>
 #+end_export
 It is pronounced â€œmar keyâ€.
 #+end_margin
 is a scrolling piece of text.

--------------------------------------------------------------------------------
*Source:*
#+begin_src org
 An HTML â€œmarqueeâ€
 ,#+begin_margin
 An example is best:
 ,#+begin_export html
 <marquee>Catch me if you can!</marquee>
 ,#+end_export
 It is pronounced â€œmar keyâ€.
 ,#+end_margin
 is a scrolling piece of text.
#+end_src
#+end_details
#+html: <br>

#+begin_details Example: Brief code snippet in tooltip/margin
It's a
#+begin_margin simple
/Proof Sketch:/ â€œSquintâ€ your eyes to see ~zero : â„•~ and ~nothing : Maybe â„•~ as
essentially the same, and â€œsquintâ€ your eyes to see that ~suc~ is essentially the
same as ~just~.

More formally, here's one direction:
#+begin_src haskell :tangle no
to : Maybe â„• â†’ â„•
to nothing  = zero
to (just n) = suc n
  #+end_src

The rest is an arduous exercise if you don't know what's going on.
#+end_margin
exercise to show that â„• is fixedpoint of ~Maybe~.
--------------------------------------------------------------------------------
*Source:*
#+begin_src org
It's a
,#+begin_margin simple
/Proof Sketch:/ â€œSquintâ€ your eyes to see ~zero : â„•~ and ~nothing : Maybe â„•~ as
essentially the same, and â€œsquintâ€ your eyes to see that ~suc~ is essentially the
same as ~just~.

More formally, here's one direction:
,#+begin_src haskell :tangle no
to : Maybe â„• â†’ â„•
to nothing  = zero
to (just n) = suc n
,#+end_src

The rest is an arduous exercise if you don't know what's going on.
,#+end_margin
exercise to show that â„• is fixedpoint of ~Maybe~.
#+end_src
#+end_details
#+html: <br>

#+begin_details "â˜… Example: Lengthy â€˜marginâ€™ with multiple code blocks!" :title-color orange
It's a
#+begin_margin simple
  We show that there is an /isomorphism/; i.e., a non-lossy protocol between ~Maybe â„•~
  and ~â„•~ in stages.

  First, let's recall the definitions ... in Agda ...
  #+begin_src haskell :tangle no :tangle no
data Maybe (A : Set) : Setâ‚ where
  nothing : Maybe A
  just    : A â†’ Maybe A

data â„• : Set where
  zero : â„•
  suc  : â„• â†’ â„•
   #+end_src

  We can show ~Maybe â„• â‰… â„•~ by writing two functions...
  #+begin_src haskell :tangle no
to : Maybe â„• â†’ â„•
to nothing = zero
to (just n) = suc n

from : â„• â†’ Maybe â„•
from zero = nothing
from (suc n) = just n
  #+end_src

  ...and, finally, checking that the two functions undo each other...
  #+begin_src emacs-lisp :tangle no
toâˆ˜from : âˆ€ {n} â†’  to (from n)  â‰¡  n
toâˆ˜from n = {! try it! }

fromâˆ˜to : âˆ€ {m} â†’  from (to m)  â‰¡  m
fromâˆ˜to m = {! try it! }
  #+end_src


  This is â€œsimpleâ€, but involved!
   #+end_margin
exercise to show that â„• is fixedpoint of ~Maybe~.
--------------------------------------------------------------------------------
*Source:*
#+begin_src org :tangle no
It's a
,#+begin_margin simple
We show that there is an /isomorphism/; i.e., a non-lossy protocol between ~Maybe â„•~
and ~â„•~ in stages.

First, let's recall the definitions ... in Agda ...
,#+begin_src haskell :tangle no :tangle no
data Maybe (A : Set) : Setâ‚ where
  nothing : Maybe A
  just    : A â†’ Maybe A

data â„• : Set where
  zero : â„•
  suc  : â„• â†’ â„•
,#+end_src

We can show ~Maybe â„• â‰… â„•~ by writing two functions...
,#+begin_src haskell :tangle no
to : Maybe â„• â†’ â„•
to nothing = zero
to (just n) = suc n

from : â„• â†’ Maybe â„•
from zero = nothing
from (suc n) = just n
,#+end_src

...and, finally, checking that the two functions undo each other...
,#+begin_src emacs-lisp
toâˆ˜from : âˆ€ {n} â†’  to (from n)  â‰¡  n
toâˆ˜from n = {! try it! }

fromâˆ˜to : âˆ€ {m} â†’  from (to m)  â‰¡  m
fromâˆ˜to m = {! try it! }
,#+end_src

This is â€œsimpleâ€, but involved!
,#+end_margin
exercise to show that â„• is fixedpoint of ~Maybe~.
#+end_src
#+end_details
#+html: <br>

# HTML Setup -- I want the code in the tooltips to look nice :-)
#+html:      <style> code, pre {color: black; background-color:Snow;} </style>
#+html:      <style> pre.tooltip {color: black; background-color:Snow;} </style>

åœ¨åŒ…å«ä»£ç å—çš„ tooltips ä¸­å¢åŠ ä¸‹é¢çš„æ ·å¼å¯ä»¥è®©å…¶æ˜¾ç¤ºçš„æ›´å‹å¥½
#+begin_src org :tangle no
#+html:      <style> pre.tooltip {color: black; background-color:Snow;} </style>
#+end_src
# #+html:      <style> code, pre {color: black; background-color:Snow;}</style>

*** red:show
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-show
:END:

ç›´æ¥è°ƒç”¨ emacs ä¸­çš„å˜é‡ï¼Œç”¨è¿™ä¸ªå˜é‡çš„å€¼æ›¿æ¢åœ¨å½“å‰ä½ç½®ã€‚

å¦‚ï¼š

=show:user-full-name= = show:user-full-name

=show:emacs-version= = show:emacs-version

#+html: <br>
#+begin_details show ä»£ç å®ç° :title-color green
#+begin_src emacs-lisp
(o-deflink show
  "Yield the value of the expression O-LABEL, with =GLOSSARY= being a reserved name.

Example uses:

    show:user-full-name

    <show: (* 2 (+ 3 4 (- pi))) >


Note that there is `elisp' links with Emacs, out of the box.
However, they only serve to evaluate Lisp expressions; for example,
to make â€œlink buttonsâ€ that do useful things, as follows.

   [[elisp:(find-file user-init-file)][Init]]

In particular, `elisp' links do not export the value of their expression.
That is what we accomplish with this new `show' link type."
  [:face '(:underline "green")
   :let (o-value (if (equal o-label "GLOSSARY")
                     (pp-to-string (mapcar #'cl-second o--docs-actually-used))
                   (pp-to-string (eval (car (read-from-string o-label)))))
         o-expr (if (equal o-label "GLOSSARY")
                    (concat "GLOSSARY ---i.e., o--docs-actually-used"
                            "\n\nWe erase the glossary not on the first export, but on the second export."
                            "\nThe first export collects all citations, which are used in the second export.")
                  o-label))
  :help-echo (format
              (concat "Upon export, the following will be placed literally"
                      "\n\t%s"
                      "\nWhich is the value of the expression:\n\t%s")
              o-value
              o-expr)]
  (cond ((not (equal o-label "GLOSSARY")) o-value)

       ;; Otherwise O-LABEL is glossary, which we print in HTML & LaTeX
       ((equal 'html o-backend)
          (s-join " "
                  (--map
                   (format "<abbr class=\"tooltip\" title=\"%s\">%s</abbr>"
                           (o-html-export-preserving-whitespace (cl-third it))
                           (cl-second it))
                   ;; Ignore duplicates; i.e., entries with the same name/title.
                   (cl-remove-duplicates o--docs-actually-used
                                         :test (lambda (x y) (cl-equalp (cl-second x) (cl-second y)))))))
       (t (s-join "\n\n"
                  (cl-loop for (label name doc)
                           in o--docs-actually-used
                           collect
                           (format
                           (concat "\\vspace{1em}\\phantomsection"
                                   "\\textbf{%s}\\quad"
                                   "\\label{o-glossary-%s}"
                                   "%s See page "
                                   "\\pageref{org-special-block-extras"
                                   "-glossary-declaration-site-%s}")
                           name
                           o-label
                           (when doc
                             (thread-last doc ;; preserve whitespace
                               (s-replace "&" "\\&") ;; Hack!
                               (s-replace "  " " \\quad ")
                               (s-replace "\n" " \\newline{\\color{white}.}")))
                           o-label))))))
#+end_src
#+end_details

*** [[red:kbd]]
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-kbd
:END:


ä¸€èˆ¬ç”¨äºç»„åˆé”® ~[[kbd:C-c_C-c]]~ [[kbd:C-c_C-c]]

å¯ä»¥ç›´æ¥ä½¿ç”¨ =kbd:C-c_C-c= kbd:C-c_C-c ä¸éœ€è¦åŠ ä¸Š =[[...]]=

å¦‚æœä¸æƒ³ç”¨ä¸‹åˆ’çº¿éœ€è¦ç”¨ =<>= åŒ…èµ·æ¥ï¼Œå¦‚ï¼š ~<kbd:C-c C-c>~ <kbd:C-c C-c> ä¹Ÿæ˜¯ä¸€æ ·çš„

è¿˜å¯ä»¥è‡ªå·±æŒ‡å®šæç¤ºå†…å®¹ï¼š ~[[kbd:C-c_C-c][æˆ‘æ˜¯C-c C-c ç»„åˆé”®çš„è¯´æ˜æç¤ºä¿¡æ¯]]~ [[kbd:C-c_C-c][æˆ‘æ˜¯C-c C-c ç»„åˆé”®çš„è¯´æ˜æç¤ºä¿¡æ¯]]

#+begin_details kbd çš„å®ç°
#+begin_src emacs-lisp
(o-deflink kbd
        "Show keysequence O-LABEL in a nice grey button-like font, along with a tooltip of its documentation, if any.

Such links do not get folded in [[bracket]] style, and are rendered as buttons within Emacs.

Moreover, O-LABEL may use â€˜_â€™ in-lieu of spaces or [[bracket]] link notation.

Examples:
    [[kbd:C-x C-s]]
â‰ˆ <kbd: C-x C-s>
â‰ˆ kbd:C-x_C-s"
        [:display 'full
        :let (the-label  (s-trim (s-replace "_" " " o-label))
                            lisp-func  (ignore-errors (cl-second (help--analyze-key (kbd the-label) the-label)))
                            tooltip    (or o-description (ignore-errors (documentation lisp-func)) "")
                            tooltip?   (not (equal tooltip ""))
                            style      (if tooltip? "border-color: red" "")
                            keystrokes (format "<kbd style=\"%s\">%s</kbd>" style the-label))
        ;; o-description is always nil when it comes to deciding the :face.
        :face (list :inherit 'custom-button :box (if tooltip? "red" t))
        :help-echo (format "%s âˆ· %s\n%s" the-label (or lisp-func "") tooltip)]
        (if (equal o-backend 'latex)
            (format "\\texttt{%s}" the-label)
            (if tooltip?
                ;; The style=â‹¯ is to remove the underlying caused by <abbr>.
                (format "<abbr class=\"tooltip\" style=\"border: none; text-decoration: none;\" title=\"%s âˆ· %s<br>%s\">%s</abbr>"
                        the-label (or lisp-func "") (o-html-export-preserving-whitespace tooltip)
                        keystrokes)
            keystrokes)))
#+end_src

ä¸‹é¢çš„æ ·å¼è§„åˆ™å¯ä»¥ç”¨æ¥ä¸» keystorkes æ›´å¥½çš„æ˜¾ç¤ºã€‚

#+begin_src emacs-lisp
(defvar o--kbd-html-setup nil
"Has the necessary keyboard styling HTML beeen added?")

(unless o--kbd-html-setup
(setq o--kbd-html-setup t)
(setq org-html-head-extra
(concat org-html-head-extra
"
<style>
/* From: https://endlessparentheses.com/public/css/endless.css */
/* See also: https://meta.superuser.com/questions/4788/css-for-the-new-kbd-style */
kbd
{
-moz-border-radius: 6px;
-moz-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
-webkit-border-radius: 6px;
-webkit-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
background-color: #f7f7f7;
border: 1px solid #ccc;
border-radius: 6px;
box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
color: #333;
display: inline-block;
font-family: 'Droid Sans Mono', monospace;
font-size: 80%;
font-weight: normal;
line-height: inherit;
margin: 0 .1em;
padding: .08em .4em;
text-shadow: 0 1px 0 #fff;
word-spacing: -4px;

box-shadow: 2px 2px 2px #222; /* MA: An extra I've added. */
}
</style>")))
#+end_src

æµ‹è¯•ï¼š
#+begin_src emacs-lisp
(deftest "It becomes <kbd> tags, but final symbol non-ascii *may* be ignored"
[kbd direct-org-links]
(â‡ (âŸ° "kbd:C-u_80_-âˆ€") "<p>\n<kbd style=\"\">C-u 80</kbd>_-âˆ€</p>"))

(deftest "[[It]] becomes <kbd> tags"
[kbd square-org-links]
(â‡ (âŸ° "[[kbd:C-u_80_-]]") "<p>\n<kbd style=\"\">C-u 80 -</kbd></p>"))

(deftest "<It> becomes <kbd> tags, and surrounding space is trimmed"
[kbd angle-org-links]
(â‡ (âŸ° "<kbd: C-u 80 - >")  "<p>\n<kbd style=\"\">C-u 80 -</kbd></p>"))

(deftest "It has a tooltip documenting the underlying Lisp function, when possible"
[kbd tooltip]
(â‡ (âŸ° "<kbd: M-s h .>")

    "<abbr class=\"tooltip\""
    (* anything)
    "Highlight each instance of the symbol at point.<br>Uses the
    next face from â€˜hi-lock-face-defaultsâ€™ without
    prompting,<br>unless you use a prefix argument.<br>Uses
    â€˜find-tag-default-as-symbol-regexpâ€™ to retrieve the symbol
    at point.<br><br>This uses Font lock mode if it is enabled;
    otherwise it uses overlays,<br>in which case the
    highlighting will not update as you type.&emsp;The
    Font<br>Lock mode is considered ''enabled'' in a buffer if
    its â€˜major-modeâ€™<br>causes â€˜font-lock-specified-pâ€™ to return
    non-nil, which means<br>the major mode specifies support for
    Font Lock."
    (* anything)
    "<kbd style=\"border-color: red\">M-s h .</kbd></abbr>"))
#+end_src
#+end_details

*** [[red:doc]]
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-doc
:END:


æ–‡æ¡£ç±»å‹ï¼Œå†…å®¹å®šä¹‰åœ¨ [[id:aa445529-4f0e-48d8-833f-12c149603ca6][Documentations]] ä¸­, å¦‚ï¼š doc:s-replace-all

ä¹Ÿå¯ä»¥é€šè¿‡ ~#+begin_documentation doc-name :label label-name~ æ¥å®šä¹‰æ–‡æ¡£å†…å®¹ã€‚

#+begin_documentation doc-name :label label-name
I am a test documentation... !!!
#+end_documentation

ä¹‹åå¯ä»¥ =doc:label-name= doc:label-name ä¹Ÿå¯ä»¥ =[[doc:label-name][è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹
æ›¿æ¢label-name]]= [[doc:label-name][è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹
æ›¿æ¢label-name]]

æˆ–è€…æ²¡æœ‰ =label-name= æ—¶å€™ç›´æ¥ä½¿ç”¨ =doc-name=, =doc:doc-name=, doc:doc-name, å½“æ²¡æœ‰
=label-name= æ—¶ï¼Œå®ƒå…¶å®ä¹Ÿæ˜¯æœ‰å€¼çš„ï¼Œé»˜è®¤æ˜¯ =doc-name= å°†ç©ºæ ¼æ›¿æ¢æˆ '_'(ä¸‹åˆ’çº¿)ï¼Œæ›´å¤š
å¯ä»¥æŸ¥çœ‹ doc:o--documentation ã€‚

#+begin_box Full Example :background-color custard
#+latex_header: \newunicodechar{Ï€}{\ensuremath{\pi}}

_User enters â€¦_
#+begin_src org
,#+begin_documentation Existential Angst :label "ex-angst"
A negative feeling arising from freedom and responsibility.

Also known as
1. /Existential Dread/, and
2. *Existential Anxiety*.

Perhaps a distraction, such as [[https://www.w3schools.com][visiting W3Schools]], may help ;-)

Then again, ~coding~ can be frustrating at times, maybe have
a slice of pie with maths by reading â€œ$e^{iÃ—Ï€} + 1 = 0$â€ as a poem ;-)
,#+end_documentation
#+end_src

#+begin_documentation Existential Angst :label ex-angst
A negative feeling arising from freedom and responsibility.

Also known as
1. /Existential Dread/, and
2. *Existential Anxiety*.

Perhaps a distraction, such as [[https://www.w3schools.com][visiting W3Schools]], may help ;-)

Then again, ~coding~ can be frustrating at times, maybe have
a slice of pie with maths by reading â€œ$e^{iÃ—Ï€} + 1 = 0$â€ as a poem ;-)
#+end_documentation

_Thenâ€¦_ =doc:ex-angst= gives us doc:ex-angst,
or using a description: [[doc:ex-angst][â€œexistence is painâ€?]]
( ~[[doc:ex-angst][â€œexistence is painâ€?]]~ )

:Labelless_example:
#+begin_documentation Existential Angsty
A negative feeling arising from freedom and responsibility.

bye
#+end_documentation

doc:Existential_Angsty
:End:
#+end_box

#+html: <br>
#+begin_box :background-color green
org-special-src-blocks åŒ…çš„ä½œè€…è‡ªå·±çš„ documentation library:

badge:Htmlized|Org|green|https://alhassy.github.io/org-special-block-extras/documentation.org.html
or
badge:Pretty|HTML|green|https://alhassy.github.io/org-special-block-extras/documentation.html.
#+end_box
#+html: <br>

*** [[red:colour]]
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-colour
:END:


å¸¦é¢œè‰²æ–‡å­—ï¼Œ ~[[blue:content]]~

å¦‚ï¼š [[blue:blue]], [[red:red]], [[green:green]]

å¯ä»¥æ‰§è¡Œ ~M-x: list-colors-display~ æŸ¥çœ‹æœ‰å“ªäº›æ”¯æŒçš„é¢œè‰²ã€‚

å¯ç»“åˆåˆ é™¤çº¿ç­‰ä½¿ç”¨ï¼Œå¦‚ï¼š +[[red:delete line]]+, /[[red:italic]]/, _[[red:underline]]_, *[[red:bold]]*

ä¹Ÿå¯ä»¥ä½¿ç”¨ ~[[color:#eee][this is content]]~ æ¥æŒ‡å®šå…¶å®ƒçš„é¢œè‰²å€¼, [[color:#66EE33][this is content]] ã€‚

*** [[red:remark]]
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-ssection-remark
:END:


~[[remark:Author][content]]~

å¦‚ï¼š [[remark:Jasim][Hello, where are you?]]

å¸¦ replace çš„ remark: ~[[remark:Qasim][/â€˜jâ€™/ #+replacewith: /â€˜qâ€™/]]~

[[remark:Qasim][/â€˜jâ€™/ #+replacewith: /â€˜qâ€™/]]

*** [[red:ref]]
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-ref
:END:


ä¸€ç§ä»£ç å—ä¸­çš„é”šç‚¹é“¾æ¥

åœ¨ä»£ç å—ä¸­çš„è¡Œåé¢å¢åŠ  ~ref:name~ ï¼Œå¦‚ï¼š [[(start)]] ç„¶åä½¿ç”¨ ~[[(name)]]~ å¯ç”Ÿæˆé“¾æ¥ç›´
æ¥å®šä½åˆ°ä»£ç å—ä¸­çš„é‚£ä¸€è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚

*** red:link-here
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-link-here
:END:


åˆ›å»ºä¸€ä¸ªé”™ç‚¹é“¾æ¥ link-here:name, ç‚¹å‡»å®ƒåæ³¨æ„é“¾æ¥å˜æˆäº†

http://127.0.0.1:8080/posts/emacs_org_special_src_blocks.html#name

ç‚¹å‡»è¯¥é“¾æ¥ä¼šè½¬å‘ URL =#name=, ä¸€èˆ¬é…åˆ octoicon:x å›¾æ ‡æ¥ä½¿ç”¨ï¼Œ $x$ å¯ä»¥æ˜¯
=home, link, mail, report, tag, clock= ä¸­çš„ä»»æ„ä¸€ä¸ªï¼š octoicon:home,
octoicon:link, octoicon:mail, octoicon:report, octoicon:tag, octoicon:clock

#+begin_details ä¸Šé¢ 6 ç§ icons çš„å®ç°æ–¹å¼ :title-color green
ä¸‹é¢çš„ SVGs æ¥è‡ª https://primer.style/octicons/

#+begin_src emacs-lisp
(defvar
    o--supported-octoicons
    (-partition 2
                '(
                home
                "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16
16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\"
d=\"M16 9l-3-3V2h-2v2L8 1 0 9h2l1 5c0 .55.45 1 1 1h8c.55 0
1-.45 1-1l1-5h2zm-4 5H9v-4H7v4H4L2.81 7.69 8 2.5l5.19 5.19L12
14z\"></path></svg>"

                link
                "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16
16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\"
d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69
3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10
5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0
2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5
0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55
13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"

                mail
                "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14
16\" width=\"14\" height=\"16\"><path fill-rule=\"evenodd\"
d=\"M0 4v8c0 .55.45 1 1 1h12c.55 0 1-.45
1-1V4c0-.55-.45-1-1-1H1c-.55 0-1 .45-1 1zm13 0L7 9 1 4h12zM1
5.5l4 3-4 3v-6zM2 12l3.5-3L7 10.5 8.5 9l3.5 3H2zm11-.5l-4-3
4-3v6z\"></path></svg>"

                report
                "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16
16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\"
d=\"M0 2a1 1 0 011-1h14a1 1 0 011 1v9a1 1 0 01-1 1H7l-4
4v-4H1a1 1 0 01-1-1V2zm1 0h14v9H6.5L4 13.5V11H1V2zm6
6h2v2H7V8zm0-5h2v4H7V3z\"></path></svg>"

                tag
                "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15
16\" width=\"15\" height=\"16\"><path fill-rule=\"evenodd\"
d=\"M7.73 1.73C7.26 1.26 6.62 1 5.96 1H3.5C2.13 1 1 2.13 1
3.5v2.47c0 .66.27 1.3.73 1.77l6.06 6.06c.39.39 1.02.39 1.41
0l4.59-4.59a.996.996 0 000-1.41L7.73 1.73zM2.38
7.09c-.31-.3-.47-.7-.47-1.13V3.5c0-.88.72-1.59
1.59-1.59h2.47c.42 0 .83.16 1.13.47l6.14 6.13-4.73
4.73-6.13-6.15zM3.01 3h2v2H3V3h.01z\"></path></svg>"

                clock
                "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14
16\" width=\"14\" height=\"16\"><path fill-rule=\"evenodd\"
d=\"M8 8h3v2H7c-.55 0-1-.45-1-1V4h2v4zM7 2.3c3.14 0 5.7 2.56
5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 011.3 8c0-3.14 2.56-5.7
5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14
7-7-3.14-7-7-7z\"></path></svg>"))

    "An association list of supported OctoIcons.

Usage: (cadr (assoc 'ICON o--supported-octoicons))")
#+end_src

#+begin_src emacs-lisp
(o-deflink octoicon
            "Show an OctoIcon: home, link, mail, report, tag, clock"
            [:help-echo "Show an OctoIcon: home, link, mail, report, tag, clock"]
            (unless (member (intern o-label) '(home link mail report tag clock))
                (error "octoicon:%s â‡’ This label is not supported!" o-label))
            (if (not (equal o-backend 'html))
                ""
                (s-collapse-whitespace
                (cadr (assoc (intern o-label)
                            o--supported-octoicons)))))

(o-deflink link-here
            "Export a link to the current location in an Org file."
            [:help-echo (format "This is a local anchor link named â€œ%sâ€" path)]
            (if (not (equal o-backend 'html))
                ""
                (format (s-collapse-whitespace
                        "<a class=\"anchor\" aria-hidden=\"true\" id=\"%s\"
        href=\"#%s\">%s</a>")
                        o-label o-label (cadr (assoc 'link
                                                    o--supported-octoicons)))))
#+end_src

#+begin_org-demo
link-here:example-location (Click the icon and see the URL has changed!)
#+end_org-demo

#+html: <br>
#+begin_box æµ‹è¯•
#+begin_src emacs-lisp
(deftest "It works as expected: We have an anchor with the given ID, and the default SVG chain icon."
  [link:here]
  (â‡ (âŸ° "link-here:example-location (Click the icon and see the URL has changed!)")
     "<a class=\"anchor\" aria-hidden=\"true\" id=\"example-location\" href=\"#example-location\"><svg"
     (* anything)
     "</svg></a> (Click the icon and see the URL has changed!)"
     (* anything)))
#+end_src
#+end_box

#+end_details

*** red:badge
:PROPERTIES:
:COLUMNS:  %CUSTOM_ID[(Custom Id)]
:CUSTOM_ID: link-section-badge
:END:


=badge:left|right|right-bg-color|right-link-url|left-icon=

æˆ–

=[[badge:left|right|right-bg-color|right-link-url|left-icon]]=

è‡³å°‘è¦æœ‰ =left= å’Œ =right=, å³ =badge:left|right=, badge:left|right, å½“æœ‰
=right-link-url= æ—¶å³è¾¹æ˜¯å¯ç‚¹å‡»çš„ã€‚

[[https://shields.io/][Shields.io: Quality metadata badges for open source projects]]

badge:wiki|github|informational|here|wikipedia

[[../assets/img/badges.png]]

github ä»“åº“çš„ badge ç”Ÿæˆï¼š

[[https://github.com/dwyl/repo-badges][GitHub - dwyl/repo-badges: Use repo badges (build passing, coverage, etc) in your readme/markdown file to signal code quality in a project.]]

è‡ªå®šä¹‰ badge:

[[https://shields.io/category/build][Shields.io: Quality metadata badges for open source projects]]

#+html: <br>
#+begin_org-demo
What are badges?

badge:Let_me_google_that|for_you!|orange|https://lmgtfy.app/?q=badge+shields.io&iie=1|Elixir

or

[[badge: Let me google that | for you! |orange|https://lmgtfy.app/?q=badge+shields.io&iie=1 |Elixir]]

or

badge:Let_me_*not*_google_that|for_you
#+end_org-demo
#+html: <br>

#+begin_details æµ‹è¯• :title-color
#+begin_src emacs-lisp
(deftest "It works when all 5 arguments are provided"
  [badge]
  (â‡ (âŸ° "badge:Let_me_google_that|for_you!|orange|https://lmgtfy.app/?q=badge+shields.io&iie=1|Elixir")
     "<a href=\"https://lmgtfy.app/?q=badge+shields.io&iie=1\">"
     "<img src=\"https://img.shields.io/badge/Let_me_google_that-for_you%21-orange?logo=Elixir\"></a>"))

(deftest "It works when we use [[link]] syntax with generous spaces and newlines"
  [badge]
  (â‡ (âŸ° "[[badge: Let me google that | for you! | orange |
         https://lmgtfy.app/?q=badge+shields.io&iie=1|Elixir]]")

     "<a href=\"https://lmgtfy.app/?q=badge+shields.io&iie=1\">"
     (* anything)
     "<img src=\"https://img.shields.io/badge/Let%20me%20google%20that-for%20you%21-orange?logo=Elixir\">"))

(deftest "It works when only the first 2 arguments are provided; asterisks are passed unaltered into the first argument"
  [badge]
  (â‡ (âŸ° "badge:Let_me_*not*_google_that|for_you")
     "<img src=\"https://img.shields.io/badge/Let_me_%2Anot%2A_google_that-for_you-nil?logo=nil\">"))

(deftest "It works when all 5 arguments are provided - URL â€˜hereâ€™ makes it a local link"
  [badge]
  (â‡ (âŸ° "badge:key|value|informational|here|Elixir")
     "<a id=\"key\" href=\"#key\">"
     "<img src=\"https://img.shields.io/badge/key-value-informational?logo=Elixir\"></a>"))

(deftest "We can use spaces, commas, dashes, and percentage symbols in the first argument"
  [badge]
  (â‡ (âŸ° "badge:example_with_spaces,_-,_and_%|points_right_here|orange|here")
     "<a id=\"example_with_spaces,_-,_and_%\" href=\"#example_with_spaces,_-,_and_%\">"
     "<img src=\"https://img.shields.io/badge/example_with_spaces%2C_--%2C_and_%25-points_right_here-orange?logo=nil\"></a>"))

(deftest "It works when only first 2 arguments are given: Default colour & logo are green & no logo shown"
  [badge]
  (â‡ (âŸ° "badge:key|value")
     "<img src=\"https://img.shields.io/badge/key-value-nil?logo=nil\">"))

(deftest "When only a key is provided, the value slot is shown as an empty green stub"
  [badge]
  (â‡ (âŸ° "badge:key")
     "<img src=\"https://img.shields.io/badge/key--nil?logo=nil\">"))

(deftest "When only a value is provided, only the value is shown in a default green ---no stub for the missing key, yay"
  [badge]
  (â‡ (âŸ° "badge:|value")
        "<img src=\"https://img.shields.io/badge/-value-nil?logo=nil\">"))


(deftest "It's only a green stub when provided with an empty key and empty value"
  [badge]
  (â‡ (âŸ° "badge:||green")
     "<img src=\"https://img.shields.io/badge/--green?logo=nil\">"))

(deftest "It's only a green stub when we use a totally [[badge:]]"
  [badge]
  (â‡ (âŸ° "[[badge:]]")
     "<img src=\"https://img.shields.io/badge/--nil?logo=nil\">"))

#+end_src
#+end_details
#+html: <br>

#+begin_details æ›´å¤šæ ·ä¾‹ :title-color green
- badge:key|value|informational|here|Elixir <=
=badge:key|value|informational|here|Elixir= ç‚¹å‡»ä¹‹åä¼šè·³è½¬åˆ° =#key= é”šç‚¹å¤„ã€‚

- badge:example_with_spaces,_-,_and_%|points_right_here|orange|here <= =badge:example_with_spaces,_-,_and_%|points_right_here|orange|here=

- badge:key|value <= =badge:key|value=

- badge:empty_value||informational <= =badge:empty_value||informational= æ²¡æœ‰
  value çš„æƒ…å†µ

- badge:|value <= =badge:|value= æ²¡æœ‰ key çš„æƒ…å†µ

- badge: ||green <= =badge:||green= æ²¡ key ä¹Ÿæ²¡ value, æˆ– [[badge:]] <= =[[badge:]]=

#+end_details
#+html: <br>

#+begin_details é€šç”¨è¯­æ³• :title-color green
reddit-subscribe-to:exact-name-of-a-subreddit

github-stars:gcclll/blog.cheng92.com

github-watchers:gcclll/blog.cheng92.com

github-forks:gcclll/blog.cheng92.com

github-followers:gcclll

twitter-follow:gccll_love

tweet:https://blog.cheng92.com

#+begin_example
badge:your_key|its_neato_value|some_url|a_logo_as_shown_below

[[badge: your key | its neato value | some url | a logo as shown below]]

reddit-subscribe-to:exact-name-of-a-subreddit

github-stars:user-name/repository-name

github-watchers:user-name/repository-name

github-forks:user-name/repository-name

github-followers:user-name

twitter-follow:user-name

tweet:url
#+end_example
#+end_details
#+html: <br>

#+begin_details é¢œè‰²æ ·ä¾‹ :title-color green
#+html: <br>
#+begin_org-demo
+ badge:|red|red badge:|critical|critical
+ badge:|blue|blue badge:|informational|informational
+ badge:|brightgreen|brightgreen badge:|success|success
+ badge:|orange|orange badge:|important|important
+ badge:|lightgrey|lightgrey badge:|inactive|inactive
+ badge:|green|green
+ badge:|yellowgreen|yellowgreen
+ badge:|yellow|yellow
+ badge:|blueviolet|blueviolet
+ badge:|ff69b4|ff69b4
+ badge:|9cf|9cf
+ ...

Consult https://htmlcolorcodes.com/ to see the HEX code of any other colour you
wish to use; e.g., badge:|1d8348|1d8348
#+end_org-demo

#+end_details
#+html: <br>

#+macro: showicon badge:||grey||$1  $1

#+begin_details badge icons :title-color green
#+begin_parallel 4 :bar t
 + â€œFireâ€ ::
   - {{{showicon(Elixir)}}}
   - {{{showicon(tinder)}}}
   - {{{showicon(codeigniter)}}}
   - {{{showicon(prometheus)}}}
   - {{{showicon(sparkpost)}}}

--------------------------------------------------------------------------------

 + â€œMessagingâ€ ::
    - {{{showicon(quip)}}}
    - {{{showicon(WeChat)}}}
    - {{{showicon(google-hangouts)}}}
    - {{{showicon(hackhands)}}}
    - {{{showicon(google-messages)}}}
    - {{{showicon(Slack)}}}
    # Tor badge:||grey|here|Tor

--------------------------------------------------------------------------------

 + â€œEmacsâ€ ::
    - {{{showicon(gnu-emacs)}}}
    - {{{showicon(spacemacs)}}}
    - {{{showicon(vim)}}}
    - {{{showicon(neovim)}}}
    - {{{showicon(gnu)}}}
    - {{{showicon(github)}}}
    - {{{showicon(acm)}}}
    - {{{showicon(wikipedia)}}}
    - {{{showicon(microsoft-excel)}}}
    - {{{showicon(microsoft-word)}}}
    - {{{showicon(dropbox)}}}
    - {{{showicon(google-scholar)}}}
    - {{{showicon(google)}}}
    - {{{showicon(google-translate)}}}
    - {{{showicon(ghost)}}}
    - {{{showicon(helm)}}}
    - {{{showicon(apache-openoffice)}}}
    - {{{showicon(buffer)}}}
    - {{{showicon(adobe-fonts)}}}
    - {{{showicon(google-calendar)}}}

--------------------------------------------------------------------------------

 + â€œSocialâ€ ::
    - {{{showicon(google-cast)}}}
    - {{{showicon(youtube)}}}
    - {{{showicon(discord)}}}
    - {{{showicon(facebook)}}}
    - {{{showicon(google-hangouts)}}}
    - {{{showicon(whatsapp)}}}
    - {{{showicon(skype)}}}
      # - {{{showicon(arxive)}}}
    - {{{showicon(reddit)}}}
    - {{{showicon(stack-overflow)}}}
    - {{{showicon(stack-exchange)}}}
    - {{{showicon(linkedin)}}}
    - {{{showicon(twitter)}}}
    - {{{showicon(jabber)}}}

--------------------------------------------------------------------------------

 + â€œLightbulbâ€ ::
    - {{{showicon(lighthouse)}}}
    - {{{showicon(google-keep)}}}
    - {{{showicon(minds)}}}

--------------------------------------------------------------------------------

 + â€œProgrammingâ€ ::
     - {{{showicon(git)}}}
     - {{{showicon(ruby)}}}
     - {{{showicon(scala)}}}
     - {{{showicon(OCaml)}}}
     - {{{showicon(javascript)}}}
     - {{{showicon(gnu-bash)}}}
     - {{{showicon(powershell)}}}
     - {{{showicon(LaTeX)}}}
     - {{{showicon(java)}}}
     - {{{showicon(kotlin)}}}
     - {{{showicon(haskell)}}}
     - {{{showicon(coffeescript)}}}
     - {{{showicon(purescript)}}}
     - {{{showicon(rust)}}}
     - {{{showicon(typescript)}}}
     - {{{showicon(css3)}}}
     - {{{showicon(python)}}}
     - {{{showicon(c)}}}
     - {{{showicon(clojure)}}}
     - {{{showicon(lua)}}}
     - {{{showicon(adobe-acrobat-reader)}}}
     - {{{showicon(perl)}}}
    # c-+-+              badge:||grey|here|c-+-+
    # c#                 badge:||grey|here|c#

--------------------------------------------------------------------------------

 + â€œMiscellaneousâ€ ::
     - {{{showicon(read-the-docs)}}}
     - {{{showicon(buy-me-a-coffee)}}}
     - {{{showicon(gimp)}}}
     - {{{showicon(mega)}}}
     - {{{showicon(nintendo-3ds)}}}
     - {{{showicon(paypal)}}}
     - {{{showicon(pinboard)}}}
     - {{{showicon(mocha)}}}
     - {{{showicon(Gitea)}}}
     - {{{showicon(instacart)}}}
     - {{{showicon(openStreetMap)}}}
     - {{{showicon(amazon)}}}
     - {{{showicon(svg)}}}
     - {{{showicon(rss)}}}
     - {{{showicon(swagger)}}}
     - {{{showicon(pastebin)}}}
     - {{{showicon(skyliner)}}}
     - {{{showicon(iTunes)}}}
     - {{{showicon(gulp)}}}
     - {{{showicon(leaflet)}}}
     - {{{showicon(youtube-gaming)}}}
     - {{{showicon(GIMP)}}}
     - {{{showicon(atom)}}}

   # pokemon            badge:||grey|here|pokemon
   #                     badge:||grey|here|1001-track-lists
   #                     badge:||grey|here|auda-city
   #                     badge:||grey|here|dribble
#+end_parallel
#+end_details
#+html: <br>

#+macro: withsrc  $1 @@html:<details><summary>src</summary>@@ ~$1~ @@html:</details>@@
#+begin_details æµè¡Œçš„é€šç”¨åº“ badges :title-color green
# +begin_org-demo :style sequential

+ {{{withsrc(badge:Emacs|23/26/28|green|https://www.gnu.org/software/emacs|gnu-emacs)}}}
+ {{{withsrc(badge:Org|9.3.6|blue|https://orgmode.org|gnu)}}}
+ {{{withsrc([[badge:org-special-block-extras|1.0|informational|https://alhassy.github.io/org-special-block-extras/README.html|Gnu-Emacs][org-special-block-extras badge]])}}}
  # + twitter:https://github.com/alhassy/org-special-block-extras
+ {{{withsrc([[badge:melpa|pending|critical|https://github.com/alhassy/emacs.d#use-package-the-start-of-initel|github][melpa badge]])}}}
+ {{{withsrc([[badge:docs|literate|success|https://github.com/alhassy/emacs.d#what-does-literate-programming-look-like|read-the-docs][read-the-docs badge]])}}}
  {{{withsrc(badge:wiki|github|informational|here|wikipedia)}}}
+ {{{withsrc(badge:code_coverage|88%|green|here|codecov)}}}
  {{{withsrc(badge:build|passing|success|here|azure-pipelines)}}}
+ {{{withsrc(badge:author|musa_al-hassy|purple|https://alhassy.github.io/|nintendo-3ds)}}}
+ {{{withsrc(badge:author|musa_al-hassy|purple|https://alhassy.github.io/|gimp)}}}
+ {{{withsrc([[badge:license|GNU_3|informational|https://www.gnu.org/licenses/gpl-3.0.en.html|read-the-docs][gnu 3 license badge]])}}}
+ {{{withsrc(badge:issue_tracking|github|informational|here|github)}}}
+ {{{withsrc(badge:help_forum|discourse|informational|here|discourse)}}}
+ {{{withsrc(badge:social_chat|gitter|informational|https://gitter.im/explore|gitter)}}}
+ {{{withsrc(badge:Maintained?|yes|success)}}}
  {{{withsrc(badge:Maintained?|no|critical)}}}
  {{{withsrc(badge:No_Maintenance_Intended|Ã—|critical|http://unmaintained.tech/)}}}
+ {{{withsrc(badge:website|up|success)}}}
  {{{withsrc(badge:website|down|critical)}}}
+ {{{withsrc(badge:Ask_me|anything|1abc9c)}}}
  {{{withsrc(badge:contributions|welcome|green|https://github.com/alhassy/org-special-block-extras/issues)}}}
+
  # Org macro args are delimited by â€˜,â€™!
  # Wont show correctly: {{{withsrc(badge:Made_with|Python,_LaTeX,_MathJax,_and_Emacs_Org-mode|1f425)}}}
  badge:Made_with|Python,_LaTeX,_MathJax,_and_Emacs_Org-mode|1f425
  @@html: <details><summary>src</summary>@@
  ~badge:Made_with|Python,_LaTeX,_MathJax,_and_Emacs_Org-mode|1f425~
  @@html: </details>@@

# +end_org-demo
#+end_details

** æ›¿æ¢å†…å®¹(rename)

Define a block
[[doc:o--rename][rename]] so that the following examples behave as shown.

#+begin_details Hints
1. It can be done in less than 10 lines of Lisp.
2. First, try to doc:s-replace-all the substitution
   ~'(("Allah" . "God") ("Yacoub". "Jacob") ("Yusuf" . "Joseph"))~
   only.
3. Then take out such hard-coded substitutions â€¦ these functions /may/ be helpful:
   doc:--map / doc:-map, doc:s-split, doc:s-trim
#+end_details

#+html: <br>
#+begin_box Examples

# Thisâ€¦
#+begin_example org
,#+begin_rename "Allah to God, Yacoub to Jacob, Yusuf to Joseph"
Quran 12-4: *_Yusuf_* said to his father ( _*Yacoub*_ ), /â€œO my father, indeed I have seen (in a dream) eleven
stars and the sun and the moon; I saw them prostrating to me.â€/
,#+end_rename
#+end_example
Yieldsâ€¦
#+begin_rename "Allah to God, Yacoub to Jacob, Yusuf to Joseph"
Quran 12-4: *_Yusuf_* said to his father ( _*Yacoub*_ ), /â€œO my father, indeed I have seen (in a dream) eleven
stars and the sun and the moon; I saw them prostrating to me.â€/
#+end_rename

--------------------------------------------------------------------------------
#+begin_org-demo :style sequential

[[rename:Pharaoh to Firaun, Joseph to Yusuf][Genesis 41-17: Pharaoh said unto Joseph, /In my dream, behold, I stood upon the
bank of the river/ â€¦]]

#+end_org-demo

#+end_box

#+html: <br>

#+begin_solution
#+begin_src emacs-lisp
(o-defblock rename (list "") nil
  "Perform the given LIST of substitutions on the text.
The LIST is a comma separated list of â€˜toâ€™ separated symbols.
In a link, no quotes are needed."
  (s-replace-all
   (--map (cons (car it) (cadr it))
          (--map (s-split " to " (s-trim it))
                 (s-split "," list)))
   contents))
#+end_src

#+RESULTS:



#+end_solution

** æŒ¡æ¿(spoiler)

å¯ä»¥é€šè¿‡ ~#+begin_spoiler :left "[" :right "]"~ çš„ left&right å±æ€§æ¥ä¿®æ”¹å·¦å³ä¸¤è¾¹åŒ¹
é…ç¬¦å·ï¼Œåœ¨ç¬¦å·å†…çš„å†…å®¹ä¼šè¢«ä¸€ä¸ªçº¯è‰²çš„ div ç›–ä½ï¼Œå½“é¼ æ ‡æ”¾ä¸Šå»çš„æ—¶å€™æ˜¾ç¤ºçœŸæ­£çš„å†…å®¹ã€‚

~$+begin_spoiler pink~ åé¢åŠ ä¸Šé¢œè‰²åï¼Œå¯ç›´æ¥ä¿®æ”¹çº¯è‰² div çš„èƒŒæ™¯è‰²ã€‚

# Warning: Enabling the following ruins the beautiful kbd:ğ’³ styling, upon export.
# +html_head: <style>
# +html_head: .spoiler {color: grey; background-color:grey;}
# +html_head: .spoiler:hover {color: black; background-color:white;}
# +html_head: <style>
# Example use: <span class="spoiler"> test </span>

Define a block [[doc:o--spoiler][spoiler]] so that the following examples behave as shown.

#+begin_details Hints
1. It can be done in less than 10 lines of Lisp.
2. You will need the following style setup â€¦
   #+begin_example org
#+html_head: <style>
#+html_head: .spoiler {color: grey; background-color:grey;}
#+html_head: .spoiler:hover {color: black; background-color:white;}
#+html_head: <style>
# Example use: <span class="spoiler"> test </span>
   #+end_example
3. /Escape/ HTML snippets by enclosing them in ~@@html: â€¦ @@~ ---as discussed above
   in the introduction to special blocks.
4. The functions  doc:s-replace-regexp and doc:regexp-quote /may/ be useful.
#+end_details

#+html: <br>
#+begin_box Examples
#+begin_parallel :bar t
#+begin_example org
#+begin_spoiler
((Yusuf)) said to his father ((Yacoub)), /â€œO my father, indeed I have seen
((eleven stars)) and ((the sun and the moon)); I saw them prostrating to me.â€/
#+end_spoiler
#+end_example

#+begin_spoiler
((Yusuf)) said to his father ((Yacoub)), /â€œO my father, indeed I have seen
((eleven stars)) and ((the sun and the moon)); I saw them prostrating to me.â€/
#+end_spoiler

#+columnbreak:
#+html: <br>

#+begin_example org
#+begin_spoiler :left "[" :right "]"
[Yusuf] said to his father [Yacoub], /â€œO my father, indeed I have seen
[eleven stars] and [the sun and the moon]; I saw them prostrating to me.â€/
#+end_spoiler
#+end_example

#+begin_spoiler :left "[" :right "]"
[Yusuf] said to his father [Yacoub], /â€œO my father, indeed I have seen
[eleven stars] and [the sun and the moon]; I saw them prostrating to me.â€/
#+end_spoiler

#+end_parallel
#+end_box

#+html: <br>
#+begin_solution
Rather than having auxiliary ~#+html_head:~ styling settings, we have moved the
styling information to the ~defblock~ declaration /and/ are using the main argument
to colour the spoiler ---which defaults to grey ;-)

--------------------------------------------------------------------------------

For example, the next segment of text is in a block ~#+begin_spoiler pink~ ...
#+begin_spoiler pink
((Yusuf)) said to his father ((Yacoub)), /â€œO my father, indeed I have seen
((eleven stars)) and ((the sun and the moon)); I saw them prostrating to me.â€/
#+end_spoiler

Whereas, the following begins with ~#+begin_spoiler orange~ ...
#+begin_spoiler orange
((Yusuf)) said to his father ((Yacoub)), /â€œO my father, indeed I have seen
((eleven stars)) and ((the sun and the moon)); I saw them prostrating to me.â€/
#+end_spoiler

--------------------------------------------------------------------------------

#+begin_src emacs-lisp
(o-defblock spoiler (color "grey") (left "((" right "))")
  "Hide text enclosed in double parens ((like this)) as if it were spoilers.
   LEFT and RIGHT may be other kinds of delimiters.
   The main argument, COLOR, indicates which color to use.

For LaTeX, this becomes â€œfill in the blanksâ€, with the answers
in the footnotes."
  (if (equal backend 'latex)
      (s-replace-regexp
       (concat (regexp-quote left) "\\(.*?\\)" (regexp-quote right))
       "@@latex:\\\\fbox{\\\\phantom{\\1}}\\\\footnote{\\1}@@"
       contents)
  (-let [id (gensym)]
    (concat
     ;; In HTML, a â€˜styleâ€™ can be, technically, almost anywhere...
     (format
      "<style> #%s {color: %s; background-color:%s;}
       #%s:hover {color: black; background-color:white;} </style>
       " id color color id)
     (s-replace-regexp
      (concat (regexp-quote left) "\\(.*?\\)" (regexp-quote right))
      (format "@@html:<span id=\"%s\"> \\1 </span>@@" id)
      contents)))))
#+end_src

#+RESULTS:
| :export | (lambda (label description backend) (s-replace-all `((@@ . )) (o--spoiler backend (or description label) label :o-link? t))) | :help-echo | (lambda (window object position) (save-excursion (goto-char position) (-let* (((&plist :path :format :raw-link :contents-begin :contents-end) (cadr (org-element-context))) (description (when (equal format 'bracket) (copy-region-as-kill contents-begin contents-end) (substring-no-properties (car kill-ring))))) (format %s |


There's actually a problem with this â€˜solutionâ€™; can you find it?
#+begin_spoiler
Hint: ((Try the link form and see how it breaks!))
#+end_spoiler
#+end_solution

JS æ–¹å¼å®ç°å˜è‰²ï¼š
#+begin_details
:OnMouseOver_OnMouseOut_Approach:

An alternative would be to use JS with mouse parameters; e.g.:

#+begin_export html
<a href="http://alhassy.github.io/"
   style="background: pink; padding: 10px; cursor: pointer"
   onMouseOver="this.style.color='#0F0'"
   onMouseOut="this.style.color='#00F'" >Text</a>
#+end_export

Possibly using ID's as the current working solution above.
:End:
#+end_details

** é—®ç­”(solution)

#+begin_solution
The answer is 2.

If you're interested in such â€˜fundamentalâ€™ questions, consider reading
  Russel and Whitehead's /Principa Mathematica/ ;-)
#+end_solution

#+html: <br>
#+begin_details å®ç°
#+begin_src emacs-lisp
(o-defblock solution
  (title "Solution")
  (reprimand "Did you actually try? Maybe see the â€˜hintsâ€™ above!"
   really "Solution, for real")
  "Show the answers to a problem, but with a reprimand in case no attempt was made."
  (o-thread-blockcall raw-contents
                    (details really :title-color "red")
                    (box reprimand :background-color "blue")
                    (details title)))
#+end_src
#+end_details

** æŠ˜å (details) :xblockfold:

[[kbd:xblockfold]]  ~$+begin_details~ æŠ˜å å—ï¼Œé‡Œé¢å¯ä»¥åµŒå¥—å…¶å®ƒ blocks.

#+html: <br>
#+begin_details æµ‹è¯•ä»£ç 
#+begin_src js
function test() {
  console.log('xxx')
}

test()
#+end_src
#+end_details

ä¿®æ”¹æ ‡é¢˜é¢œè‰² ~:title-color "red"~
#+begin_details NAME :title-color "red"
#+begin_box name
contents
#+end_box
#+end_details

#+html: <br>
#+begin_details å®ç° :title-color green
#+begin_src emacs-lisp
(o-defblock details (title "Details") (title-color "green")
  "Enclose contents in a folded up box, for HTML.

For LaTeX, this is just a boring, but centered, box.

By default, the TITLE of such blocks is â€œDetailsâ€
and its TITLE-COLOR is green.

In HTML, we show folded, details, regions with a nice greenish colour.

In the future ---i.e., when I have time---
it may be prudent to expose more aspects as arguments,
such as â€˜background-colorâ€™.
"
  (format
   (pcase backend
     (`latex "\\begin{quote}
                  \\begin{tcolorbox}[colback=%s,title={%s},sharp corners,boxrule=0.4pt]
                    %s
                  \\end{tcolorbox}
                \\end{quote}")
     (_ "<details class=\"code-details\"
                 style =\"padding: 1em;
                          background-color: #e5f5e5;
                          /* background-color: pink; */
                          border-radius: 15px;
                          color: hsl(157 75% 20%);
                          font-size: 0.9em;
                          box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;\">
                  <summary>
                    <strong>
                      <font face=\"Courier\" size=\"3\" color=\"%s\">
                         %s
                      </font>
                    </strong>
                  </summary>
                  %s
               </details>"))
   title-color title contents))
#+end_src
#+end_details

#+begin_example ç»™ header å¢åŠ  hover
#+html: <style>  summary:hover {background:pink;} </style>
#+end_example

#+html: <br>
#+html: <style>  summary:hover {background:pink;} </style>
#+begin_details å¢åŠ  header hover é¼ æ ‡æ”¾ä¸Šæ¥è¯•è¯• :title-color
test...
#+end_details

** æºç -ç»“æœ(org-demo) :xblocklr:

[[kbd:xblocklr]] org-demo block, å·¦è¾¹æºç ï¼Œå³è¾¹è¾“å‡ºç»“æœ

#+begin_org-demo
/italics/ and _underline_

$e^{i \times \pi} + 1 = 0$
#+end_org-demo

org-demo block, ä¸Šè¾¹æºç ï¼Œä¸‹è¾¹è¾“å‡ºç»“æœ

#+begin_org-demo :style seq
/italics/ and _underline_

$e^{i \times \pi} + 1 = 0$
#+end_org-demo

#+html: <br>
#+begin_org-demo
\[ \sin^2 x + \cos^2 x = \int_\pi^{\pi + 1} 1 dx = {3 \over 3} \]
#+end_org-demo

#+html: <br>
#+begin_details å®ç°
#+begin_src emacs-lisp
(o-defblock org-demo nil (source "Source" result "Result"
                        source-color "cyan" result-color "cyan"
                        style "parallel"
                        sep (if (equal backend 'html) "@@html:<p><br>@@" "\n\n\n\n")
                        )
  "Output the CONTENTS of the block as both parsed Org and unparsed.

Label the source text by SOURCE and the result text by RESULT

finally, the source-result fragments can be shown in a STYLE
that is either â€œparallelâ€ (default) or â€œsequentialâ€.

SEP is the separator; e.g., a rule â€˜<hr>'.
"
  (-let [text (concat
               ;; Source
               (thread-last raw-contents
                 (format (if (equal backend 'html)
                             "<div ><pre class=\"src src-org\">%s</pre></div>"
                           "\n\\begin{verbatim}\n%s\n\\end{verbatim}"))
                 org-export
                 (o--blockcall box source :background-color source-color)
                 org-export)
               ;; Separator
               sep
               ;; Result
               (thread-last raw-contents
                 (o--blockcall box result :background-color result-color)
                 org-export))]

   (if (equal style "parallel")
       (o--blockcall parallel "2" :bar nil text)
       (concat "#+end_export\n" text "\n#+begin_export"))))
#+end_src
#+end_details

*** è°ƒæ•´æ˜¾ç¤ºèŒƒå›´

 Using a mixture of ~\frac~ and ~\displaystyle~, define a block [[doc:o--tree][tree]] so that the
 following examples behave as shown. Hint: doc:org-list-to-lisp and
 doc:with-temp-buffer may be useful ;-)

#+begin_box Programming â‰ˆ Proving
#+begin_parallel
*Source*
#+begin_src org :tangle no
,#+begin_tree
  + Function Application :: f(a) : B
    - a : A
    - f : A â†’ B

  + Modus Ponens :: q
    - p
    - p â‡’ q
,#+end_tree
#+end_src

# +columnbreak:
#+html: <p>

*Result*
#+begin_tree
+ Function Application :: f(a) : B
  - a : A
  - f : A â†’ B

+ Modus Ponens :: q
  - p
  - p â‡’ q
#+end_tree
#+end_parallel
#+end_box

#+begin_solution
#+begin_src emacs-lisp
(defun o--list-to-math (lst)
  "Get a result LST from ORG-LIST-TO-LISP and render it as a proof tree."
  (cond
   ((symbolp lst) "")
   ((symbolp (car lst)) (o--list-to-math (cadr lst)))
   (t
    (-let* (((conclusionâ‚€ children) lst)
            ((name named?) (s-split " :: " conclusionâ‚€))
            (conclusion (or named? conclusionâ‚€)))
      (if (not children)
          (if named? (format "\\frac{}{%s}[%s]" conclusion name) conclusion)
        (format "\\frac{\\displaystyle %s}{%s}%s"
                (s-join " \\qquad "
                        (mapcar #'o--list-to-math children))
                conclusion
                (if named? (format "[\\text{%s}]" name) "")))))))

(o-defblock tree (main-arg) nil
  "Write a proof tree using Org-lists.

To get

         premisesâ‚€  â€¦   premisesâ‚™
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ reason ]
               conclusion

You type

       ,#+begin_tree
       + reason :: conclusion
         - premisesâ‚€
         - premisesâ‚
         â‹®
         - premisesâ‚™
       ,#+end_tree

Where each premisesáµ¢ may, recursively, also have named reasons
and (indented) child premises of its own.

If there are multiple trees, they are shown one after the other.

The text in this block should be considered LaTeX;
as such, Org markup is not recognised.

A proof tree, derivation, is then just a deeply nested
itemisation.  For instance, assuming P = Q(X), X = Y, Q(Y) = R,
the following proves P = R.

  ,#+begin_tree
  + Trans :: P = R
    - P = Q(X)
      + âœ“
    - Trans :: Q(X) = R
      + Trans :: Q(X) = Q(Y)
        - Refl :: Q(X) = Q(X)
          + âœ“
        - Leibniz :: Q(X) = Q(Y)
          + X = Y
            - âœ“
      + Sym :: Q(Y) = R
        - R = Q(Y)
          - âœ“
  ,#+end_tree"
  (s-join "" (--map (format "\\[%s\\]"
                                (o--list-to-math it))
                        (cdr (with-temp-buffer
                               (insert raw-contents)
                               (goto-char (point-min))
                               (org-list-to-lisp))))))
#+end_src

#+RESULTS:
| :export | (lambda (label description backend) (s-replace-all `((@@ . )) (o--tree backend (or description label) label :o-link? t))) | :help-echo | (lambda (window object position) (save-excursion (goto-char position) (-let* (((&plist :path :format :raw-link :contents-begin :contents-end) (cadr (org-element-context))) (description (when (equal format 'bracket) (copy-region-as-kill contents-begin contents-end) (substring-no-properties (car kill-ring))))) (format %s |


#+end_solution

  For more on these â€˜proof treesâ€™, see [[https://cpb-us-w2.wpmucdn.com/u.osu.edu/dist/a/4597/files/2014/08/Natural_Logic-2epb48e.pdf][â€˜Natural Logicâ€™ by Neil Tennant]].
  # Out of print, but downloadable as a scanned PDF as the above link.

\[\] (*/Warning!/* For MathJax to activate, you should have some math ~$...$~
somewhere /besides/ the ~tree~ blocks; just ~\[\]~ suffices. )

** å¤šåˆ—(parallel) :xblockcol:

[[kbd:xblockcol]]

#+begin_parallel 3 :bar yes-or-any-other-text
Left

Left

#+columnbreak:

Middle 1

Middle 2

#+columnbreak:

Right

Right

#+end_parallel

åŒ…å«åœ¨ box é‡Œé¢ï¼š
#+begin_box å‚ç›´å¹³åˆ†çš„ blocks

_æ¨¡æ¿_
#+begin_src
#+begin_parallel 2 :bar yes-or-any-other-text
X

#+columnbreak:

Y

Z
#+end_parallel
#+end_src

_æ•ˆæœ_
#+begin_parallel 2 :bar yes-or-any-other-text
X

#+columnbreak:

Y

Z
#+end_parallel
#+end_box

** é‡å¤çš„å†…å®¹(stutter) :xblockrep:

[[kbd:xblockrep]]

1. ~[[stutter:5][woah, I'm repeated 5 times!]]~
2. ~#+begin_stutter n~ n è¡¨ç¤ºè¦é‡å¤å¤šå°‘æ¬¡

#+html:<br>
#+begin_box é‡å¤ stutter
~[[stutter:5][woah, I'm repeated 5 times!]]~

[[stutter:5][woah, I'm repeated 5 times!]]
#+end_box

#+html:<br>
#+begin_box é‡å¤çš„ blocks
#+begin_src
#+begin_stutter 2

words

more words
#+end_stutter
#+end_src

#+begin_stutter 2

words

more words
#+end_stutter
#+end_box

#+html: <br>
#+begin_solution
#+begin_src emacs-lisp
(o-defblock stutter (reps 2) nil
  "Output the CONTENTS of the block REPS many times"
  (-let [num (if (numberp reps) reps (string-to-number reps))]
    (s-repeat num contents)))
#+end_src
#+end_solution

** æºç å—ä¸­çš„é”šç‚¹(ref:name)


#+begin_src c -n -r
int tot = 1;                    (ref:start)
for (int i = 0; i != 10; i++)   (ref:loop)
   tot *= i;                    (ref:next)
printf("The factorial of 10 is %d", tot);
#+end_src

æ³¨æ„å³è¾¹çš„ ~(ref:start)~

#+begin_example
int tot = 1;                    \(\ref:start)
for (int i = 0; i != 10; i++)   \(\ref:loop)
   tot *= i;                    \(\ref:next)
printf("The factorial of 10 is %d", tot);
#+end_example

ç„¶ååœ¨æ–‡ç« ä¸­å¯é€šè¿‡ ~[[(start)]]~ åœ¨å½“å‰ä½ç½®([[(start)]])ç”Ÿæˆä¸€ä¸ªé“¾æ¥ï¼Œç‚¹å‡»é“¾æ¥å¯ä»¥è·³åˆ°æŒ‡
å®šçš„ä½ç½®ï¼Œåœ¨ org-file ä¸­å¯å…‰æ ‡åœ¨é“¾æ¥ä¸Šçš„æ—¶å€™å›è½¦ä¼šç›´æ¥è·³è½¬åˆ°ä»£ç ä¸­æŒ‡å®šè¡Œã€‚

å¦‚æœå¢çš„ ~-r~ é€‰é¡¹ ~[[(name)]]~ ä¸­çš„ name ä¼šå˜æˆä»£ç ä¸­å¯¹åº”çš„è¡Œæ•°å­—ï¼Œå¦‚ï¼š ~(start)~
å¯¼å‡ºåå˜æˆ ~(1)~ ã€‚
** å¤‡æ³¨(remark)

 â€œEditor Commentsâ€ are intended to be top-level first-class comments in an
 article that are inline with the surrounding text and are delimited in such a
 way that they are visible but drawing attention.  I first learned about this
 idea from Wolfram Kahl ---who introduced me to Emacs many years ago.  We
# implement editor comments as special blocks named [[doc:o--remark][remark]].

#+begin_src org :tangle no :tangle no
 In LaTeX, a =remark= appears inline with the text surrounding it.
 ,#+begin_remark Bobert
 org-mode is dope, yo!
 ,#+replacewith:
 Org-mode is essentially a path toward enlightenment.
 ,#+end_remark
 Unfortunately, in the HTML rendition, the =remark= is its own paragraph and thus
 separated by new lines from its surrounding text.
#+end_src

#+begin_box Results
 In LaTeX, an =remark= appears inline with the text surrounding it.
 #+begin_remark Bobert
 org-mode is dope, yo!
 #+replacewith:
 Org-mode is essentially a path toward enlightenment.
 #+end_remark

 å¯¼å‡ºæˆ HTML ä¹‹åï¼Œä¸Šé¢çš„æ¯ä¸€è¡Œéƒ½è¢«æ¸²æŸ“æˆäº† ~<p>~ æ ‡ç­¾ï¼Œæ‰€ä»¥ç‹¬å äº†ä¸€è¡Œï¼Œä¸æ˜¯å¾ˆç¾è§‚ã€‚
#+end_box

#+html: <br>
#+begin_details Example: æ²¡æœ‰ä»»ä½•é€‰é¡¹
 #+begin_remark
 /Please/ *change* _this_ section to be more, ya know, professional.
 #+end_remark

--------------------------------------------------------------------------------
*Source:*
#+begin_src org :tangle no
 #+begin_remark
 /Please/ *change* _this_ section to be more, ya know, professional.
 #+end_remark
#+end_src
#+end_details

#+begin_details Example: åªæä¾›ä½œè€…å
 #+begin_remark Bobert
 /Please/ *change* _this_ section to be more, ya know, professional.
 #+end_remark

 #+latex: \vspace{1em}\noindent
--------------------------------------------------------------------------------
*Source:*

#+begin_src org
 #+begin_remark Bobert
 /Please/ *change* _this_ section to be more, ya know, professional.
 #+end_remark
#+end_src

#+end_details

#+begin_details Example: æ²¡æœ‰å†…å®¹
#+begin_remark Bobert
#+end_remark
#+end_details

#+latex: \iffalse
#+begin_details "Example: With a â€œ#+replacewith:â€ clause"
 #+begin_remark
 The two-dimensional notation; e.g., $\sum_{i = 0}^n i^2$
 #+replacewith:
 A linear one-dimensional notation; e.g.,
 $(\Sigma i : 0..n \;\bullet\; i^2)$
 #+end_remark
--------------------------------------------------------------------------------
*Source:*
#+begin_src org :tangle no
 ,#+begin_remark
 The two-dimensional notation; e.g., $\sum_{i = 0}^n i^2$
 ,#+replacewith:
 A linear one-dimensional notation; e.g.,
 $(\Sigma i : 0..n \;\bullet\; i^2)$
 ,#+end_remark
#+end_src
#+end_details

#+latex: \fi
#+latex: \vspace{1em}\noindent
#+begin_details Example: Possibly â€œmalformedâ€ replacement clauses

Forgot the thing to be replacedâ€¦

#+begin_remark
#+replacewith:
A linear one-dimensional notation; e.g.,
$(\Sigma i : 0..n \;\bullet\; i^2)$
#+end_remark

--------------------------------------------------------------------------------

Forgot the new replacement thingâ€¦

#+begin_remark
 The two-dimensional notation; e.g., $\sum_{i = 0}^n i^2$
 #+replacewith:
#+end_remark

--------------------------------------------------------------------------------

Completely lost one's train of thoughtâ€¦
#+begin_parallel
 #+begin_remark
 #+replacewith:
 #+end_remark

#+columnbreak:
*Source:*

#+begin_src org :tangle no
 ,#+begin_remark
 ,#+replacewith:
 ,#+end_remark
#+end_src
#+end_parallel

#+end_details

#+begin_details Example: Terse remarks via links

#+begin_parallel :bar t
~[[edcomm:Jasim][Hello, where are you?]]~

#+html: <br>
[[remark:Jasim][Hello, where are you?]]
#+end_parallel
-------
#+begin_parallel :bar t
 The =#+replacewith:= switch ---and usual Org markup--- also works with these
 links: @@html: <br>@@ ~[[remark:Qasim][/â€˜jâ€™/ #+replacewith: /â€˜qâ€™/]]~

#+html: <br>
 [[remark:Qasim][/â€˜jâ€™/ #+replacewith: /â€˜qâ€™/]]
#+end_parallel

#+html: <br>
#+begin_src org
\#+begin_box Example: Terse remarks via links

\#+begin_parallel :bar t
~[[edcomm:Jasim][Hello, where are you?]]~

#+html: <br>
[[remark:Jasim][Hello, where are you?]]
\#+end_parallel
-------
\#+begin_parallel :bar t
 The =#+replacewith:= switch ---and usual Org markup--- also works with these
 links: @@html: <br>@@ ~[[remark:Qasim][/â€˜jâ€™/ #+replacewith: /â€˜qâ€™/]]~

#+html: <br>
 [[remark:Qasim][/â€˜jâ€™/ #+replacewith: /â€˜qâ€™/]]
\#+end_parallel
\#+end_box
#+end_src
#+end_details

æ‰€æœ‰çš„ comments, remarks éƒ½å¯ä»¥é€šè¿‡åœ¨æ–‡ä»¶å¤´å¢åŠ ä¸‹é¢ä¸€è¡Œéšè—ï¼š

#+begin_example org
#+bind: o-hide-editor-comments t
#+end_example

åŒæ—¶éœ€è¦å¼€å¯ï¼š
#+begin_src emacs-lisp
(setq org-export-allow-bind-keywords t)
#+end_src

** test

#+begin_example org
The sum of the first $n$ natural numbers is $\sum_{i = 0}^n i = {n Ã— (n + 1)
\over 2}$. Note that $n Ã— (n + 1)$ is even.
[[rremark:Jasim Jameson][Why are you taking about â€œ$\mathsf{even}$â€ here?]]
#+begin_rremark Bobbert Barakallah :signoff "Thank-you for pointing this out!" :color green
I was trying, uh ...

Yeah, to explain that ${\large n Ã— (n + 1) \over 2}$ is always an integer.
#+end_rremark

Hence, we only need to speak about whole numbers.
[[rremark:][Then please improve your transition sentences.]]
#+end_example


#+begin_quote
The sum of the first $n$ natural numbers is $\sum_{i = 0}^n i = {n Ã— (n + 1)
\over 2}$. Note that $n Ã— (n + 1)$ is even.
[[rremark:Jasim Jameson][Why are you taking about â€œ$\mathsf{even}$â€ here?]]
#+begin_rremark Bobbert Barakallah :signoff "Thank-you for pointing this out!" :color green
I was trying, uh ...

Yeah, to explain that ${\large n Ã— (n + 1) \over 2}$ is always an integer.
#+end_rremark

Hence, we only need to speak about whole numbers.
[[rremark:][Then please improve your transition sentences.]]
#+end_quote

#+begin_src emacs-lisp
(thread-blockcall raw-contents
                  (box name)
                  (details (upcase name) :title-color "green")
#+end_src
* Latex

:Fails_idea:
Larger example:
#+begin_mathjax
red:\Sigma
#+end_mathjax
:End:

#+latex: \vspace{1em}

Latex è¯­æ³•å¢åŠ é¢œè‰²(~{\color{red} x}~)ï¼š ${\color{red}x}$

block ç±»å‹ï¼š ~latex_definitions~

 #+begin_details â€˜latex-definitionsâ€™ Implementation
  #+begin_src emacs-lisp
(o-defblock latex-definitions nil nil
  "Declare but do not display the CONTENTS according to the BACKEND."
  (format (pcase backend
            ('html "<p style=\"display:none\">\\[%s\\]</p>")
            (_ "%s"))
          raw-contents))
  #+end_src

  #+RESULTS:

 :OLD:
  #+begin_src emacs-lisp :tangle no
(defun o--latex-definitions (backend contents)
  "Declare but do not display the CONTENTS according to the BACKEND."
  (cl-loop for (this that) in (-partition 2 '("<p>" ""
                                           "</p>" ""
                                           "\\{" "{"
                                           "\\}" "}"))
        do (setq contents (s-replace this that contents)))
  (format (pcase backend
            ('html "<p style=\"display:none\">\\[%s\\]</p>")
            (_ "%s"))
          contents))
  #+end_src

  - Org escapes ~{,}~ in LaTeX export, so we need to â€˜unescapeâ€™ them.
   This is clearly a hack.
  :End:
 #+end_details

 #+latex: \iffalse

~#+begin_latex-definitions~ å®šä¹‰å·¦æ‹¬å·å’Œå³æ‹¬å·:
#+begin_latex-definitions
\def\LL{\color{violet}(}
\def\RR{\color{violet})}
#+end_latex-definitions

#+begin_src org
\def\LL{\color{violet}(}
\def\RR{\color{violet})}
#+end_src

ç„¶åå°±å¯ä»¥ä½¿ç”¨ ~\LL a + 1 \RR~ è¯­æ³•æ¥å¾—åˆ°ä¸€ä¸ªå¸¦æœ‰é¢œè‰² Latex ä¸­çš„æ‹¬å· $\LL$ å’Œ $\RR$

#+begin_org-demo :source-color white :result-color white
$$
 {\color{teal}\bigoplus}
_{   {\color{violet} x}
    = {\color{red} a}}
^{\color{cyan} b}
    {\color{brown}{\,f\, x}}
\quad=\quad
            {\color{brown}{f\,\LL  {\color{red} a} \RR}}
\;{\color{teal}\oplus}\; {\color{brown}{f \, \LL a + 1 \RR }}
\;{\color{teal}\oplus}\; {\color{brown}{f \, \LL a + 2 \RR }}
\;{\color{teal}\oplus}\; \cdots
\;{\color{teal}\oplus}\; {\color{brown}{f \, \LL {\color{cyan} b} \RR}}
$$

| [[teal:âŠ•]]   | /Loop sequentially with loop-bodies fused using [[teal:âŠ•][âŠ•]]/ |
| /[[violet:x]]/ | /Use [[violet:x][x]] as the name of the current element/         |
| /[[red:a]]/    | /Start with [[violet:x][x]] being [[red:a][a]]/                             |
| /[[cyan:b]]/   | /End with [[violet:x][x]] being [[cyan:b][b]]/                               |
| /[[color:brown][f x]]/      | /At each [[violet:x][x]] value, compute [[color:brown][f x]]/                     |

# Note that /[[color:brown][f x]]/ is obtained by =/[[color:brown][f x]]/.=
#+end_org-demo

 #+latex: \fi

 --------------------------------------------------------------------------------

:Verbatim_pasted_from_the_above_THIS_link:
MathJax ä¸ä¼šå¤„ç†åŒ…å« HTML æ ‡ç­¾çš„ math

#+begin_export html
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
CommonHTML: {
    styles: {
    //
    // remove CSS for '.mjx-math *'
    //
    '.mjx-math *': {
        display: null,
        '-webkit-box-sizing': null,
        '-moz-box-sizing': null,
        'box-sizing': null,
        'tex-align': null
    },
    //
    // add CSS for .mjx-math span instead
    //
    '.mjx-math span': {
        display: 'inline-block',
        '-webkit-box-sizing': 'context-box !important',
        '-moz-box-sizing': 'context-box !important',
        'box-sizing': 'context-box !important',
        'tex-align': 'left'
    },
    //
    // override display for .mjx-char spans
    //
    'span.mjx-char': {
        display: 'block'
    }
    }
}
});
MathJax.Hub.Register.StartupHook("TeX Jax Ready", function () {
var MML = MathJax.ElementJax.mml;
var TEX = MathJax.InputJax.TeX;
TEX.Definitions.macros.insertHTML = 'InsertHTML';
TEX.Parse.Augment({
    InsertHTML: function (name) {
    var html = this.GetArgument(name).replace(/^\s*<!--\s*/,'').replace(/\s*-->\s*$/,'');
    var span = MathJax.HTML.Element('mjx-reset', {style: {display:'inline-block'}});
    span.innerHTML = html;  // serious security risk if users can enter math
    span.setAttribute("xmlns","http://www.w3.org/1999/xhtml");
    var mml = MML["annotation-xml"](MML.xml(span)).With({encoding:"application/xhtml+xml",isToken:true});
    this.Push(MML.semantics(mml));
    }
});
});
</script>
<script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS_CHTML" defer></script>

<div style="xfont-size: 150%">
$$x + \left(\,\insertHTML{<!--
<table width="100" height="100"
style="display:inline-table; vertical-align:-.25em; background:red; border:5px solid green;
box-sizing:border-box !important">
<tr><td style="text-align:center">abc</td></tr>
</table>
-->}\,\right) + y$$
</div>


$$x+\left(\insertHTML{<!--
<i>this</i> is <b>html</b>
-->}\right)+y$$
#+end_export
:End:

#+latex: \vspace{1em}
[[color:orange][Going forward,]] it would be nice to easily have our colour links work within
a mathematical special block.

#+latex: \vspace{1em}
[[color:orange][Moreover,]] it would be nice to extend the =color= block type to take multiple
arguments, say, =câ‚ câ‚‚ â€¦ câ‚™= such that:

 | /n/ | Behaviour                                                                          |
 |---+------------------------------------------------------------------------------------|
 | 0 | No colouring; likewise if no arguments altogether                                  |
 | 1 | Colour all entries using the given colour câ‚                                       |
 | /n/ | Paragraph --region separated by a new line-- =i= is coloured by =câ‚–= where =k = i mod n= |

 Besides having a colourful article, another usage I envision for this
 generalisation would be when rendering text in multiple languages; e.g., use red
 and blue to interleave Arabic poetry with its English translation.


* link here head
@@html:<span id="test-link-here-links"></span>@@

badge:Thanks|for_reading
tweet:https://github.com/gcclll/blog.cheng92.com
badge:|buy_me_a_coffee|gray|https://www.cheng92.com|buy-me-a-coffee

* org-html-themes

æ”¯æŒçš„ block

#+begin_example
$('.note').before("<p class='admonition-title note'>Note</p>");
    $('.seealso').before("<p class='admonition-title seealso'>See also</p>");
    $('.warning').before("<p class='admonition-title warning'>Warning</p>");
    $('.caution').before("<p class='admonition-title caution'>Caution</p>");
    $('.attention').before("<p class='admonition-title attention'>Attention</p>");
    $('.tip').before("<p class='admonition-title tip'>Tip</p>");
    $('.important').before("<p class='admonition-title important'>Important</p>");
    $('.hint').before("<p class='admonition-title hint'>Hint</p>");
    $('.error').before("<p class='admonition-title error'>Error</p>");
    $('.danger').before("<p class='admonition-title danger'>Danger</p>");
});
#+end_example

#+begin_note
note
#+end_note
#+html: <br>

#+begin_seealso
see also
#+end_seealso
#+html: <br>

#+begin_warning
warning
#+end_warning
#+html: <br>

#+begin_important
important
#+end_important
#+html: <br>

#+begin_caution
caution
#+end_caution
#+html: <br>

#+begin_attention
attention
#+end_attention
#+html: <br>

#+begin_tip
tip
#+end_tip
#+html: <br>

#+begin_hint
hint
#+end_hint
#+html: <br>

#+begin_error
error
#+end_error
#+html: <br>

#+begin_danger
danger
#+end_danger
#+html: <br>


* COMMENT Local Variables :ARCHIVE:
# Local Variables:
# after-save-hook: gcl/org-html-export-to-html
# End:
